<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Maison de Parfum â€“ Shop</title>
  <meta name="description" content="Appleâ€‘Ã¤hnlicher, eleganter Parfumâ€‘Shop: Kollektion, Filter, Warenkorb & Bestellanfrage per Eâ€‘Mail/WhatsApp. LÃ¤uft komplett auf GitHub Pages (ohne Backend)."/>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0f0f10;
      --fg:#f4f4f5;
      --muted:#b9b9c0;
      --accent:#c7a97d; /* warmes Gold */
      --card:#161618;
      --hair:rgba(255,255,255,.08);
      --shadow:0 12px 36px rgba(0,0,0,.35);
      --radius:24px;
    }
    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{margin:0; font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background:linear-gradient(180deg, #0b0b0c, var(--bg)); color:var(--fg)}
    a{color:inherit; text-decoration:none}
    img{max-width:100%; display:block}
    button{font:inherit; color:inherit; background:none; border:none}

    /* Header / Nav */
    .nav{position:sticky; top:0; z-index:50; backdrop-filter:saturate(180%) blur(12px); background:rgba(10,10,12,.6); border-bottom:1px solid var(--hair)}
    .container{width:min(1120px, 92%); margin:0 auto}
    .nav-inner{display:flex; align-items:center; justify-content:space-between; padding:14px 0}
    .brand{font-family:"Playfair Display", serif; letter-spacing:.3px; font-size:22px; font-weight:600}
    .navlinks{display:flex; gap:20px; align-items:center}
    .navlinks a{opacity:.9}
    .navlinks a:hover{opacity:1}
    .cta{padding:10px 16px; border-radius:9999px; background:linear-gradient(90deg, var(--accent), #e0c795); color:#0a0a0b; font-weight:600; box-shadow:var(--shadow)}
    .icon-btn{position:relative; padding:8px 10px; border-radius:12px; border:1px solid var(--hair); background:#141418}
    .badge{position:absolute; top:-6px; right:-6px; background:#e5b77a; color:#111; border-radius:999px; font-size:11px; padding:2px 6px; font-weight:700}

    /* Hero */
    .hero{display:grid; grid-template-columns:1.2fr .8fr; gap:26px; align-items:center; padding:64px 0 40px}
    .kicker{color:var(--accent); font-weight:600; letter-spacing:.12em; text-transform:uppercase; font-size:12px}
    .title{font-family:"Playfair Display", serif; font-weight:700; line-height:1.1; font-size:clamp(34px, 5vw, 56px); margin:10px 0 18px}
    .lead{color:var(--muted); font-size:18px}
    .hero-card{background: radial-gradient(120% 120% at 80% 10%, rgba(199,169,125,.2), rgba(199,169,125,0) 60%), linear-gradient(180deg, #151517, #0f0f10); padding:26px; border-radius:var(--radius); border:1px solid var(--hair); box-shadow:var(--shadow)}
    .hero-grid{display:grid; grid-template-columns:repeat(2,1fr); gap:16px}
    .bottle{border-radius:18px; overflow:hidden; border:1px solid var(--hair)}

    /* Sections */
    section{padding:56px 0}
    .section-head{display:flex; align-items:end; justify-content:space-between; margin-bottom:18px}
    .section-title{font-family:"Playfair Display", serif; font-size:clamp(24px, 3vw, 36px)}
    .section-sub{color:var(--muted)}

    /* Filters */
    .filters{display:flex; gap:10px; flex-wrap:wrap}
    .chip{padding:8px 12px; border-radius:9999px; background:#141418; border:1px solid var(--hair); cursor:pointer}
    .chip.active{background:linear-gradient(90deg, #1b1b1f, #1f1f24); outline:1px solid rgba(255,255,255,.12)}
    .search{flex:1; min-width:220px; padding:10px 12px; border-radius:12px; background:#141418; border:1px solid var(--hair); color:var(--fg)}

    /* Grid / Cards */
    .grid{display:grid; grid-template-columns:repeat(3, 1fr); gap:18px}
    .card{background:linear-gradient(180deg, #151517, #101012); border:1px solid var(--hair); border-radius:20px; overflow:hidden; box-shadow:var(--shadow); display:flex; flex-direction:column}
    .card img{aspect-ratio:4/5; object-fit:cover}
    .card-body{padding:16px}
    .label{color:var(--accent); font-size:12px; letter-spacing:.12em; text-transform:uppercase}
    .name{font-weight:600; margin:8px 0 4px}
    .note{color:var(--muted); font-size:14px}
    .price{margin-top:10px; font-weight:600}
    .btn{margin-top:auto; display:inline-flex; align-items:center; gap:8px; padding:10px 14px; border-radius:12px; background:#1b1b1f; border:1px solid var(--hair); cursor:pointer}
    .btn:hover{transform:translateY(-1px)}

    /* Story */
    .story{display:grid; grid-template-columns:1fr 1fr; gap:24px}
    .story .panel{background:linear-gradient(180deg, #151517, #101012); padding:22px; border:1px solid var(--hair); border-radius:var(--radius)}

    /* Testimonials */
    .testi{display:grid; grid-template-columns:repeat(3, 1fr); gap:16px}
    .quote{background:#121214; border:1px solid var(--hair); border-radius:18px; padding:18px}

    /* Cart Drawer */
    .drawer{position:fixed; inset:0 0 0 auto; width:min(420px, 92vw); background:linear-gradient(180deg,#121214,#0f0f10); border-left:1px solid var(--hair); box-shadow:var(--shadow); transform:translateX(105%); transition:transform .35s ease; z-index:60; display:flex; flex-direction:column}
    .drawer.open{transform:translateX(0)}
    .drawer-head{display:flex; align-items:center; justify-content:space-between; padding:16px; border-bottom:1px solid var(--hair)}
    .drawer-body{padding:16px; overflow:auto; flex:1; display:flex; flex-direction:column; gap:12px}
    .cart-item{display:grid; grid-template-columns:64px 1fr auto; gap:12px; align-items:center; border:1px solid var(--hair); border-radius:14px; padding:10px; background:#141418}
    .qty{display:inline-flex; align-items:center; gap:8px}
    .qty button{width:28px; height:28px; border-radius:8px; background:#1b1b1f; border:1px solid var(--hair)}
    .drawer-foot{border-top:1px solid var(--hair); padding:16px; display:grid; gap:10px}
    .total{display:flex; justify-content:space-between; font-weight:700}
    .muted{color:var(--muted)}

    /* Footer */
    footer{border-top:1px solid var(--hair); padding:28px 0 60px; color:var(--muted)}

    /* Responsive */
    @media (max-width: 900px){
      .hero{grid-template-columns:1fr; padding-top:32px}
      .grid{grid-template-columns:1fr 1fr}
      .story{grid-template-columns:1fr}
    }
    @media (max-width: 560px){
      .grid{grid-template-columns:1fr}
      .navlinks a:not(.cta){display:none}
    }
  </style>
</head>
<body>
  <header class="nav">
    <div class="container nav-inner">
      <a class="brand" href="#top">Maison de Parfum</a>
      <nav class="navlinks">
        <a href="#produkte">Produkte</a>
        <a href="#geschichte">Unsere Geschichte</a>
        <a href="#kontakt">Kontakt</a>
        <button id="cartBtn" class="icon-btn" aria-label="Warenkorb Ã¶ffnen">ðŸ›’<span id="cartCount" class="badge" hidden>0</span></button>
        <a class="cta" href="#bestellen">Jetzt bestellen</a>
      </nav>
    </div>
  </header>

  <main id="top" class="container">
    <!-- Hero -->
    <section class="hero">
      <div>
        <div class="kicker">Dein Duft, deine IdentitÃ¤t</div>
        <h1 class="title">Definiere dich neu â€“ Mit jedem Duft.</h1>
        <p class="lead">Deine Aura, deine Regeln. Keine Logins, kein Backend nÃ¶tig.</p>
        <div style="margin-top:18px; display:flex; gap:12px; flex-wrap:wrap">
          <a class="cta" href="#produkte">Produkte entdecken</a>
          <a class="btn" href="#duftfinder">Duftfinder</a>
        </div>
      </div>
      <div class="hero-card">
        <div class="hero-grid">
          <div class="bottle"><img alt="Parfumflakon auf dunklem Hintergrund" src="https://images.unsplash.com/photo-1603715749729-83d2f229e3a5?q=80&w=1200&auto=format&fit=crop"/></div>
          <div class="bottle"><img alt="LuxuriÃ¶ser Parfumflakon" src="https://images.unsplash.com/photo-1605979257916-35ce955b7680?q=80&w=1200&auto=format&fit=crop"/></div>
          <div class="bottle"><img alt="Duftnoten â€“ Zitrus" src="https://images.unsplash.com/photo-1600349672518-3e30e188a0e7?q=80&w=1200&auto=format&fit=crop"/></div>
          <div class="bottle"><img alt="Duftnoten â€“ Holz" src="https://images.unsplash.com/photo-1541643600914-78b084683601?q=80&w=1200&auto=format&fit=crop"/></div>
        </div>
      </div>
    </section>

    <!-- Kollektion / Shop -->
    <section id="produkte">
      <div class="section-head">
        <h2 class="section-title">Produkte</h1>
        <div class="filters">
          <button class="chip active" data-filter="all">Alle</button>
          <button class="chip" data-filter="parfum">Parfum</button>
          <button class="chip" data-filter="kosmetik">Kosmetik & Pflege</button>
          <button class="chip" data-filter="ernaehrung">ErnÃ¤hrung</button>
          <button class="chip" data-filter="haushalt">Haushaltsartikel</button>
          <button class="chip" data-filter="accessoires">Accessoires</button>
          <input id="search" class="search" type="search" placeholder="Suche: Name, Note, SKU" />
        </div>
      </div>
      <div class="grid" id="products"></div>
    </section>

    <!-- Duftfinder (simple) -->
    <section id="duftfinder">
      <div class="section-head">
        <h2 class="section-title">Duftfinder</h2>
        <p class="section-sub">3 Fragen â€“ wir empfehlen einen Duft.</p>
      </div>
      <div class="story">
        <div class="panel">
          <label>1) Stimmung heute?</label>
          <div style="display:flex; gap:8px; margin-top:8px; flex-wrap:wrap">
            <button class="chip" data-q="mood" data-v="frisch">Frisch</button>
            <button class="chip" data-q="mood" data-v="elegant">Elegant</button>
            <button class="chip" data-q="mood" data-v="mystisch">Mystisch</button>
          </div>
          <label style="display:block; margin-top:12px">2) Tageszeit?</label>
          <div style="display:flex; gap:8px; margin-top:8px; flex-wrap:wrap">
            <button class="chip" data-q="time" data-v="tag">Tag</button>
            <button class="chip" data-q="time" data-v="abend">Abend</button>
          </div>
          <label style="display:block; margin-top:12px">3) Anlass?</label>
          <div style="display:flex; gap:8px; margin-top:8px; flex-wrap:wrap">
            <button class="chip" data-q="occasion" data-v="business">Business</button>
            <button class="chip" data-q="occasion" data-v="casual">Casual</button>
            <button class="chip" data-q="occasion" data-v="date">Date</button>
          </div>
          <div id="rec" style="margin-top:14px; font-weight:600"></div>
        </div>
        <div class="panel">
          <h3 style="margin-top:0">Hinweis</h3>
          <p class="section-sub">LÃ¤uft statisch ohne Server. FÃ¼r Payments kÃ¶nnen wir Stripe Payment Links oder PayPalâ€‘Buttons nachrÃ¼sten.</p>
        </div>
      </div>
    </section>

    <!-- Story -->
    <section id="geschichte">
      <div class="section-head">
        <h2 class="section-title">Unsere Geschichte</h2>
        <p class="section-sub">Aus einem Atelier in der Schweiz â€“ inspiriert von Natur & Kunst.</p>
      </div>
      <div class="story">
        <div class="panel">
          <p>Maison de Parfum interpretiert klassische ParfÃ¼merie neu. Transparente Inhaltsstoffe, kleine Batches, sorgfÃ¤ltige Handarbeit.</p>
        </div>
        <div class="panel">
          <ul style="line-height:1.9; margin:0; padding-left:18px">
            <li>Vegane Formeln, tierversuchsfrei</li>
            <li>Unisexâ€‘Kompositionen</li>
            <li>Recycelte Verpackung & kurzer Lieferweg (CH/EU)</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- Testimonials -->
    <section>
      <div class="section-head">
        <h2 class="section-title">Stimmen unserer Kund:innen</h2>
      </div>
      <div class="testi">
        <div class="quote"><p>â€žBleibt den ganzen Tag â€“ elegant und unaufdringlich.â€œ</p><small>â€” Laura K.</small></div>
        <div class="quote"><p>â€žMein Signatureâ€‘Duft! Verpackung & Service top.â€œ</p><small>â€” Daniel S.</small></div>
        <div class="quote"><p>â€žFrisch, modern, qualitativ sehr hochwertig.â€œ</p><small>â€” Sofia P.</small></div>
      </div>
    </section>

    <!-- Kontakt / Bestellen -->
    <section id="bestellen">
      <div class="section-head">
        <h2 class="section-title">Bestellen & Kontakt</h2>
        <p class="section-sub">Schreiben Sie uns direkt â€“ wir beraten gern.</p>
      </div>
      <div class="story" id="kontakt">
        <div class="panel">
          <p style="margin-top:0">Bestellungen per Eâ€‘Mail:</p>
          <a class="cta" href="mailto:bestellung@maisondeparfum.example?subject=Bestellung">bestellung@maisondeparfum.example</a>
          <p style="margin-top:14px">Oder via WhatsApp:</p>
          <a class="btn" href="https://wa.me/41000000000" target="_blank" rel="noopener">+41 00 000 00 00</a>
          <p class="section-sub" style="margin-top:14px">(Platzhalter â€“ bitte echte Kontaktdaten eintragen)</p>
        </div>
        <div class="panel">
          <form id="orderForm">
            <label for="p">Duft</label>
            <select id="p" name="product" style="width:100%; padding:10px; border-radius:10px; background:#141418; color:var(--fg); border:1px solid var(--hair)"></select>
            <label for="q" style="display:block; margin-top:10px">Menge</label>
            <input id="q" name="qty" type="number" min="1" value="1" style="width:100%; padding:10px; border-radius:10px; background:#141418; color:var(--fg); border:1px solid var(--hair)"/>
            <button class="btn" type="submit" style="margin-top:12px">Bestellanfrage senden</button>
            <div id="msg" class="section-sub" style="margin-top:10px"></div>
          </form>
        </div>
      </div>
    </section>
  </main>

  <aside id="drawer" class="drawer" aria-hidden="true">
    <div class="drawer-head">
      <strong>Warenkorb</strong>
      <button id="closeCart" class="icon-btn" aria-label="Warenkorb schlieÃŸen">âœ•</button>
    </div>
    <div id="cartBody" class="drawer-body"></div>
    <div class="drawer-foot">
      <div class="total"><span>Zwischensumme</span><span id="subtotal">CHF 0.â€“</span></div>
      <div class="muted">Versand wird nach Adresse bestÃ¤tigt.</div>
      <button id="mailtoBtn" class="cta">Bestellanfrage per Eâ€‘Mail</button>
      <a id="waBtn" class="btn" href="#" target="_blank" rel="noopener">Anfrage via WhatsApp</a>
    </div>
  </aside>

  <footer>
    <div class="container" style="display:flex; justify-content:space-between; flex-wrap:wrap; gap:12px">
      <small>Â© <span id="year"></span> Maison de Parfum</small>
      <small><a href="#impressum">Impressum</a> Â· <a href="#datenschutz">Datenschutz</a></small>
    </div>
  </footer>

  <script>
    // --- Produktdaten ---
    const PRODUCTS = [
      // PARFUM (mit realistischen Namen & Noten)
      {sku:"145", name:"Nr 145 Inspiriert von D&G Devotion", notes:"Kandierte Zitrone Â· OrangenblÃ¼te, Panna Cotta, Rum Â· Vanille", price:35, img:"https://www.chogangroup.com/images/prodotti/mini/17480122360.jpg?q=80&w=1600&auto=format&fit=crop", cat:"parfum", gender:"damen"},
      {sku:"129", name:"Nr 129 Inspiriert von Xerjoff Erba Pura", notes:"Bergamotte, Orange, Zitrone Â· fruchtige Noten Â· Ambra, Moschus, Vanille", price:59, img:"https://www.chogangroup.com/images/prodotti/mini/PR16995177870.jpg?q=80&w=1600&auto=format&fit=crop", cat:"parfum", gender:"herren"},
      {sku:"MDP-03", name:"Bois Moderne", notes:"Zedernholz Â· Ambra Â· Tonkabohne", price:149, img:"https://images.unsplash.com/photo-1610557892450-8f2a4d5be3e9?q=80&w=1600&auto=format&fit=crop", cat:"parfum", gender:"unisex"},
      {sku:"MDP-04", name:"LumiÃ¨re Blanche", notes:"Birne Â· Pfingstrose Â· Moschus", price:119, img:"https://images.unsplash.com/photo-1523293182086-7651a899d37f?q=80&w=1600&auto=format&fit=crop", cat:"parfum", gender:"damen"},
      {sku:"MDP-05", name:"CafÃ© Orient", notes:"Kaffee Â· Kardamom Â· Vanille", price:159, img:"https://images.unsplash.com/photo-1494314671902-399b18174975?q=80&w=1600&auto=format&fit=crop", cat:"parfum", gender:"unisex"},
      {sku:"MDP-06", name:"Brise Marine", notes:"Zitrus Â· Meersalz Â· Treibholz", price:129, img:"https://images.unsplash.com/photo-1519681393784-d120267933ba?q=80&w=1600&auto=format&fit=crop", cat:"parfum", gender:"herren"},

      // KOSMETIK & PFLEGE
      {sku:"COS-01", name:"Velours Face Cream", notes:"Hyaluron Â· Squalan Â· Vitamin E", price:69, img:"https://images.unsplash.com/photo-1585238342028-4bbc3e2bd345?q=80&w=1600&auto=format&fit=crop", cat:"kosmetik"},
      {sku:"COS-02", name:"Silk Hand Serum", notes:"Sheabutter Â· Panthenol Â· MandelÃ¶l", price:29, img:"https://images.unsplash.com/photo-1605497788044-5a32c7078486?q=80&w=1600&auto=format&fit=crop", cat:"kosmetik"},
      {sku:"COS-03", name:"Rose Quartz Lip Balm", notes:"RosenÃ¶l Â· Bienenwachs Â· Jojoba", price:19, img:"https://images.unsplash.com/photo-1598440947619-2c35fc9a0b68?q=80&w=1600&auto=format&fit=crop", cat:"kosmetik"},
      {sku:"COS-04", name:"No.1 Body Lotion", notes:"Aloe Â· Kokos Â· Vanille", price:39, img:"https://images.unsplash.com/photo-1611930022073-b7a4ba5fcccd?q=80&w=1600&auto=format&fit=crop", cat:"kosmetik"},

      // ERNÃ„HRUNG
      {sku:"NUT-01", name:"Collagen Elixir 10", notes:"Kollagenpeptide Â· Vitamin C Â· Zink", price:49, img:"https://images.unsplash.com/photo-1584367369853-8b966cf22c84?q=80&w=1600&auto=format&fit=crop", cat:"ernaehrung"},
      {sku:"NUT-02", name:"Matcha Focus", notes:"Bioâ€‘Matcha Â· Lâ€‘Theanin Â· Citrus", price:24, img:"https://images.unsplash.com/photo-1541516160071-4bb0c5af65a7?q=80&w=1600&auto=format&fit=crop", cat:"ernaehrung"},
      {sku:"NUT-03", name:"Protein Soft Bar", notes:"Mandel Â· Kakao Â· 18g Protein", price:3.9, img:"https://images.unsplash.com/photo-1512621776951-a57141f2eefd?q=80&w=1600&auto=format&fit=crop", cat:"ernaehrung"},
      {sku:"NUT-04", name:"Vital Gummies", notes:"Biotin Â· FolsÃ¤ure Â· Bâ€‘Vitamine", price:14, img:"https://images.unsplash.com/photo-1598440947619-14d86d51a0e3?q=80&w=1600&auto=format&fit=crop", cat:"ernaehrung"},

      // HAUSHALT
      {sku:"HOM-01", name:"Aroma Diffuser", notes:"Ultraschall Â· 300ml Â· Timer", price:59, img:"https://images.unsplash.com/photo-1587017539504-67cfbddac569?q=80&w=1600&auto=format&fit=crop", cat:"haushalt"},
      {sku:"HOM-02", name:"Sojawachs Kerze No.5", notes:"Sandelholz Â· Vanille Â· 45h", price:29, img:"https://images.unsplash.com/photo-1512453979798-5ea266f8880c?q=80&w=1600&auto=format&fit=crop", cat:"haushalt"},
      {sku:"HOM-03", name:"Room Spray Blanc", notes:"BaumwollblÃ¼te Â· Moschus", price:19, img:"https://images.unsplash.com/photo-1585386959984-a41552231658?q=80&w=1600&auto=format&fit=crop", cat:"haushalt"},
      {sku:"HOM-04", name:"Premium Waschmittel", notes:"Hypoallergen Â· 25 WL", price:18, img:"https://images.unsplash.com/photo-1581579188871-45ea61f2a0c8?q=80&w=1600&auto=format&fit=crop", cat:"haushalt"},

      // ACCESSOIRES
      {sku:"ACC-01", name:"Reiseflakon 10ml", notes:"NachfÃ¼llbar Â· Auslaufsicher", price:15, img:"https://images.unsplash.com/photo-1600180758890-6b94519a8ba6?q=80&w=1600&auto=format&fit=crop", cat:"accessoires"},
      {sku:"ACC-02", name:"Geschenkbox Classic", notes:"Magnetverschluss Â· Schwarz", price:12, img:"https://images.unsplash.com/photo-1543087903-1ac2ec7aa8c5?q=80&w=1600&auto=format&fit=crop", cat:"accessoires"},
      {sku:"ACC-03", name:"Kosmetiktasche Linen", notes:"Recycelt Â· InnenfÃ¤cher", price:25, img:"https://images.unsplash.com/photo-1582582494700-1f8a8b1e2e78?q=80&w=1600&auto=format&fit=crop", cat:"accessoires"},
      {sku:"ACC-04", name:"Duftblotter 100er", notes:"Papierstreifen Â· 100 StÃ¼ck", price:6, img:"https://images.unsplash.com/photo-1556228578-8d6f319f6c1a?q=80&w=1600&auto=format&fit=crop", cat:"accessoires"}
    ];

    // --- Helpers ---
    const fmt = v => `CHF ${v.toFixed(0)}.â€“`;
    const $ = s => document.querySelector(s);
    const $$ = s => Array.from(document.querySelectorAll(s));

    // --- Render Produktgrid ---
    const grid = document.getElementById('products');
    const search = document.getElementById('search');
    let activeFilter = 'all';

    function renderProducts(){
      const q = (search.value || '').toLowerCase();
      const list = PRODUCTS.filter(p => (activeFilter==='all' || p.cat===activeFilter) &&
        (p.name.toLowerCase().includes(q) || p.notes.toLowerCase().includes(q) || p.sku.toLowerCase().includes(q))
      );
      grid.innerHTML = list.map(p=>`
        <article class="card">
          <img src="${p.img}" alt="${p.name}" loading="lazy"/>
          <div class="card-body">
            <div class="label">${p.sku.toUpperCase()} Â· ${p.cat}${p.gender ? ` Â· ${p.gender}` : ''}</div>
            <div class="name">${p.name}</div>
            <div class="note">${p.notes}</div>
            <div class="price">${fmt(p.price)}</div>
            <button class="btn add" data-sku="${p.sku}">In den Warenkorb</button>
          </div>
        </article>`).join('');

      // Addâ€‘toâ€‘Cart Handler koppeln
      $$('.add').forEach(b=> b.addEventListener('click', ()=> addToCart(b.dataset.sku)) );
    }

    // Filter / Suche
    $$('.filters .chip').forEach(ch => ch.addEventListener('click', ()=>{
      $$('.filters .chip').forEach(c=>c.classList.remove('active'));
      ch.classList.add('active');
      activeFilter = ch.dataset.filter;
      renderProducts();
    }));
    search.addEventListener('input', renderProducts);

    // --- Warenkorb ---
    const drawer = document.getElementById('drawer');
    const cartBtn = document.getElementById('cartBtn');
    const closeCart = document.getElementById('closeCart');
    const cartBody = document.getElementById('cartBody');
    const subtotalEl = document.getElementById('subtotal');
    const badge = document.getElementById('cartCount');

    const cart = JSON.parse(localStorage.getItem('CART')||'{}'); // {sku: qty}

    function openCart(){ drawer.classList.add('open'); drawer.setAttribute('aria-hidden','false'); }
    function closeCartFn(){ drawer.classList.remove('open'); drawer.setAttribute('aria-hidden','true'); }

    cartBtn.addEventListener('click', openCart);
    closeCart.addEventListener('click', closeCartFn);

    function addToCart(sku, qty=1){
      cart[sku] = (cart[sku]||0) + qty;
      persistCart();
      renderCart();
      badgeToggle();
      openCart();
    }

    function changeQty(sku, d){
      cart[sku] = Math.max(0, (cart[sku]||0) + d);
      if(cart[sku]===0) delete cart[sku];
      persistCart();
      renderCart();
      badgeToggle();
    }

    function removeItem(sku){ delete cart[sku]; persistCart(); renderCart(); badgeToggle(); }

    function persistCart(){ localStorage.setItem('CART', JSON.stringify(cart)); }

    function badgeToggle(){
      const count = Object.values(cart).reduce((a,b)=>a+b,0);
      if(count>0){ badge.textContent = count; badge.hidden = false; }
      else { badge.hidden = true; }
    }

    function renderCart(){
      const items = Object.entries(cart).map(([sku, qty])=>{
        const p = PRODUCTS.find(x=>x.sku===sku);
        const line = p.price * qty;
        return {sku, qty, ...p, line};
      });
      const subtotal = items.reduce((a,i)=>a+i.line,0);
      cartBody.innerHTML = items.length ? items.map(i=>`
        <div class="cart-item">
          <img src="${i.img}" alt="${i.name}" style="width:64px; height:64px; object-fit:cover; border-radius:10px"/>
          <div>
            <div style="font-weight:600">${i.name}</div>
            <div class="muted">${i.sku} Â· ${i.cat}</div>
            <div class="muted">${fmt(i.price)} / Stk.</div>
            <div class="qty" style="margin-top:6px">
              <button aria-label="Menge verringern" onclick="changeQty('${i.sku}',-1)">âˆ’</button>
              <span>${i.qty}</span>
              <button aria-label="Menge erhÃ¶hen" onclick="changeQty('${i.sku}',1)">+</button>
              <button class="chip" style="margin-left:8px" onclick="removeItem('${i.sku}')">Entfernen</button>
            </div>
          </div>
          <strong>${fmt(i.line)}</strong>
        </div>`).join('') : '<p class="muted">Ihr Warenkorb ist leer.</p>';
      subtotalEl.textContent = fmt(subtotal);

      // Build mailto & WhatsApp links
      const lines = items.map(i=>`- ${i.name} (${i.sku}) x${i.qty} = ${fmt(i.line)}`).join('%0D%0A');
      const subject = encodeURIComponent('Bestellanfrage Maison de Parfum');
      const body = encodeURIComponent(`Guten Tag,%0D%0Ahier meine Bestellanfrage:%0D%0A${lines}%0D%0ASumme: ${fmt(subtotal)}%0D%0ALieferadresse:%0D%0A...`);
      document.getElementById('mailtoBtn').onclick = ()=> window.location.href = `mailto:bestellung@maisondeparfum.example?subject=${subject}&body=${body}`;
      const waText = `Guten Tag, ich mÃ¶chte bestellen:%0A${lines}%0A Summe: ${fmt(subtotal)}`;
      document.getElementById('waBtn').href = `https://wa.me/41000000000?text=${waText}`;
    }

    // --- Duftfinder (einfach) ---
    const prefs = {mood:null, time:null, occasion:null};
    document.querySelectorAll('#duftfinder .chip[data-q]').forEach(btn=>{
      btn.addEventListener('click', ()=>{ prefs[btn.dataset.q] = btn.dataset.v; recommend(); });
    });
    function recommend(){
      let rec = PRODUCTS[0];
      if(prefs.mood==='frisch') rec = PRODUCTS.find(p=>p.name.includes('Brise')) || PRODUCTS[0];
      if(prefs.mood==='elegant') rec = PRODUCTS.find(p=>p.name.includes('Ã‰clat')) || PRODUCTS[1];
      if(prefs.mood==='mystisch') rec = PRODUCTS.find(p=>p.name.includes('Noir')) || PRODUCTS[2];
      if(prefs.time==='abend') rec = PRODUCTS.find(p=>p.name.includes('Noir')) || rec;
      if(prefs.occasion==='date') rec = PRODUCTS.find(p=>p.name.includes('LumiÃ¨re')) || rec;
      document.getElementById('rec').textContent = `Empfehlung: ${rec.name} (${rec.sku})`;
    }

    // --- Kontaktformular: Auswahloptionen fÃ¼llen ---
    const select = document.getElementById('p');
    PRODUCTS.forEach(p=>{ const o = document.createElement('option'); o.value = p.sku; o.textContent = `${p.name} â€“ CHF ${p.price}.â€“`; select.appendChild(o); });

    // --- Bestellanfrage (Fallback) ---
    document.getElementById('orderForm').addEventListener('submit', (e)=>{
      e.preventDefault();
      const sku = document.getElementById('p').value;
      const qty = parseInt(document.getElementById('q').value||'1',10);
      addToCart(sku, qty);
      document.getElementById('msg').textContent = 'Zum Warenkorb hinzugefÃ¼gt â€“ Anfrage kann im Warenkorb gesendet werden.';
    });

    // --- Init ---
    document.getElementById('year').textContent = new Date().getFullYear();
    renderProducts();
    renderCart();
    badgeToggle();

    // Global fÃ¼r onclick im Template
    window.changeQty = changeQty;
    window.removeItem = removeItem;
  </script>
</body>
</html>
